syntax = "proto3";

package compute.v1;

option go_package = "OlympusGCP-Compute/gen/v1/compute;computev1";

service ComputeService {
  rpc RunService (RunServiceRequest) returns (RunServiceResponse);
  rpc TriggerFunction (TriggerFunctionRequest) returns (TriggerFunctionResponse);
  rpc CheckHealth (CheckHealthRequest) returns (CheckHealthResponse);
}

message RunServiceRequest {
  string service_name = 1;
  string image = 2;
  map<string, string> env_vars = 3;
}

message RunServiceResponse {
  string endpoint_url = 1;
}

message TriggerFunctionRequest {
  string function_name = 1;
  string payload = 2;
}

message TriggerFunctionResponse {
  string result = 1;
}

message CheckHealthRequest {
  string service_name = 1;
}

message CheckHealthResponse {
  enum Status {
    UNKNOWN = 0;
    HEALTHY = 1;
    UNHEALTHY = 2;
    DRAINING = 3;
  }
  Status status = 1;
  string message = 2;
}
